pico-8 cartridge // http://www.pico-8.com
version 18
__lua__
function _init()
	t=0
	ship={sp=1,x=60,y=60}
	bullets={}
	enemies={}
	for i=1,10 do
		add(enemies,{
			sp=17,
			x=i*16,
			y=60-i*8
		})
	end
end

function fire()
	local b = {
	sp=3,
	x=ship.x,
	y=ship.y,
	dx=0,
	dy=-3
	}
	add(bullets,b)
end

function _update()
	t+=1
	
	for b in all(bullets) do
		b.x+=b.dx
		b.y+=b.dy
		if b.x<0 or b.x>128 
			or b.y<0 or b.y>128 then
			del(bullets,b)
		end
	end
	
	if(t%6<3) then
		ship.sp=1
	else
		ship.sp=2
	end
	
	if btn(0) then ship.x-=2 end
	if btn(1) then ship.x+=2 end
	if btn(2) then ship.y-=2 end
	if btn(3) then ship.y+=2 end
	if btnp(4) then fire() end
end

function _draw()
	cls()
	print(#bullets)
	spr(ship.sp,ship.x,ship.y)
	
	for b in all(bullets) do
		spr(b.sp,b.x,b.y)
	end
	
	for e in all(enemies) do
		spr(e.sp,e.x,e.y)
	end

--	spr(17,30,30)
end
__gfx__
000000000080080000800800000aa000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000080080000800800000aa000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
007007000088880000888800000aa000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000088118800881188000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000088cc880088cc88000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700080880800808808000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000a000000a000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000a00000000a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000003333000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000033333300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000039999300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000033333300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000003003000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000030000300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000030000300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
